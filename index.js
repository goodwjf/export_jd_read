const fetch = require("node-fetch");
const path = require("path");
const fs = require("fs-extra");
const inquirer = require("inquirer");
// const FormatJson = require("./util").FormatJson;
// const genEpubUrl = require("./util").genEpubUrl;
const genCatalogUrl = require("./util").genCatalogUrl;

// define `location`, referred by util.js
var location = {}
location["href"] = 'https://cread.jd.com/read/startRead.action?bookId=BOOKID&readType=3';

// pc1.js(encrypted), referred by encryption.js, updated at 20211201
const pc1_js = "var _0xodP = 'jsjiami.com.v6', _0x1fdd = [_0xodP, 'PCLDvcKBEA==', 'R3E5wprCiA==', 'w4vChg/CmkQ=', 'w77ClMK9f8Oo', 'Gw7Do8K2I8Ku', 'G8O9wozCocOMwqPCpsKmAEw=', 'woPCm8OmY8K7', 'ADHDtcKbJQ==', 'YmBYCmk=', 'wqY9w5UFQA==', 'wqfClDfDrMO7', 'S8K9w7Fpw7w=', 'wo5rFQ==', 'OcKPw4fCgMK8fcKrwq/DrX8=', 'XGFkwoVbw7U5w6HCkRc=', 'wrTCmMOHWMKu', 'ecO6wqLDqMKH', 'w5VNwrvDqio=', 'JhHDjUgB', 'w7ZNwq3Dri8=', 'ScOlwo7Dk8Kpw7vCksO0QGA=', 'D8KtwqbCssOg', 'PifCssKLwp0=', 'SMO4PcKDAQ==', 'O3DCgS9p', 'YHBhD2lH', 'XXBxwpJrw44yw4zCtRs=', 'dMKeEMKg', 'UcKKCsKCaQ==', 'w59Fw5/DkXxBwqc=', 'UsKtLMKEfQ==', 'w4HCn8K+w6wOSw==', 'wofCo17DgWQ=', 'w6h6wp/DhBc=', 'w55XMsOrwo/CrhggwrdTwrLCglnCmFDDkwXCuUTClcK6wrLCvg==', 'wq9Nw5ZFw6o=', 'wozCmQYjw4s=', 'JHIpwp5k', 'wq1Xw6Jww6g=', 'wpNowoLCkcOUJ3FSw55+w7Q5', 'wqbCuyHDscOm', 'E8KIwoTCrQ==', 'MRTCksKmwo4=', 'fsK6w7NHw6dE', 'w7bCuCHChUc=', 'PcKPw5HCs8KnVw==', 'wrTCmiXDk8Kqw4DDtEbCnAU=', 'IhnDiH0N', 'AlsiwopVw6nDgsK2w6lST8O8O3po', 'w6PCuX/CusOZwpQPw7XDksOHwonCr3cawqw=', 'w77CmAzDksKb', 'wrwSw7ATRm8=', 'w4Fnwr3DgQo=', 'YMKDHsKERWfDgF1JdcKkw5YYRWM=', 'XGFkwoVbw7U5w6HCkRfDpyg6Fx8=', 'w7LCvinCrmdc', 'T8OhB8K9', 'FFp7w641woPDiRkR', 'w6HCtXk=', 'I8KaK3suRCTCjMKsw6lsasOhw419', 'wrpqwqvDk3c=', 'JMKjw5jCksKx', 'wrjCmyQsw6k=', 'w7rCl2DCisO2', 'YEo8wr3CrMOcXDc7w71gw6c=', 'wrFxwp7Ct8O9', 'csONI8KpLw==', 'w7XCnAfCrWs=', 'woxrwrLDuGU=', 'w7oGwpB7fMKhQ8OSwro0w6dtw41Bwp0=', 'UHRewrFi', 'w7zDjTLCuydDbTrDgA==', 'O8KcYg==', 'YwsCP8KrwrrCocK9FiE=', 'aRcODsK3wqzCt8KBFio=', 'YsK8wqw=', 'w759w5vCr8K/w57DsCfDgcKm', 'wqTChjbDiMKHw4g=', 'CzPCk8K3wqk=', 'wp7CtA81w70=', 'NsO4wrM6Jw==', 'w7t9woJewr4GTcKSw71kw5M=', 'PcOKwowKwpE=', 'w7DCvSfCum0=', 'dUwhwrnCgcOT', 'w5FUw7VRw6M=', 'RcKzd8OtasK+', 'wrDCugvDjsK9', 'RUUIw6TDpw==', 'w79tbQ8h', 'w51Zw7nDs2g=', 'EgTDgXE/', 'wrjCoCU2w54=', 'XsK7JMKOcw==', 'w5PDn8KuwpFW', 'I8K3wqrChcOw', 'ZHB3PHJtw53Ci8KCw5A=', 'w4XCn8Kow58VYcKNUTRK', 'w5JMfCQ5YighFQs=', 'w6xzKcKpwrQ=', 'YyrCpMO5AQ==', 'LcOCwq4Cwoo=', 'w4sowqh5bg==', 'w5lsw7zDk08=', 'WcO9woPDiMKe', 'w6lPw791w7A=', 'JsKlw4/CmMKC', 'ZjsHtjwQbbUdiamKWWEAi.com.v6==']; (function (_0x3739dd, _0x5dde1d, _0x519ab5) { var _0x539bdb = function (_0x1e0402, _0x233646, _0x3a13f1, _0x164798, _0x86da06) { _0x233646 = _0x233646 >> 0x8, _0x86da06 = 'po'; var _0x230d26 = 'shift', _0x3caf7b = 'push'; if (_0x233646 < _0x1e0402) { while (--_0x1e0402) { _0x164798 = _0x3739dd[_0x230d26](); if (_0x233646 === _0x1e0402) { _0x233646 = _0x164798; _0x3a13f1 = _0x3739dd[_0x86da06 + 'p'](); } else if (_0x233646 && _0x3a13f1['replace'](/[ZHtwQbbUdKWWEA=]/g, '') === _0x233646) { _0x3739dd[_0x3caf7b](_0x164798); } } _0x3739dd[_0x3caf7b](_0x3739dd[_0x230d26]()); } return 0xaf16c; }; return _0x539bdb(++_0x5dde1d, _0x519ab5) >> _0x5dde1d ^ _0x519ab5; }(_0x1fdd, 0xa6, 0xa600)); var _0x3047 = function (_0x120707, _0x3c53be) { _0x120707 = ~~'0x'['concat'](_0x120707); var _0x2a6bb1 = _0x1fdd[_0x120707]; if (_0x3047['xQrMqB'] === undefined) { (function () { var _0x1a79d0 = typeof window !== 'undefined' ? window : typeof process === 'object' && typeof require === 'function' && typeof global === 'object' ? global : this; var _0x53427d = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='; _0x1a79d0['atob'] || (_0x1a79d0['atob'] = function (_0x222090) { var _0x1076c8 = String(_0x222090)['replace'](/=+$/, ''); for (var _0x36d3ca = 0x0, _0x347d16, _0x4693cd, _0x155f12 = 0x0, _0x1ec9d7 = ''; _0x4693cd = _0x1076c8['charAt'](_0x155f12++); ~_0x4693cd && (_0x347d16 = _0x36d3ca % 0x4 ? _0x347d16 * 0x40 + _0x4693cd : _0x4693cd, _0x36d3ca++ % 0x4) ? _0x1ec9d7 += String['fromCharCode'](0xff & _0x347d16 >> (-0x2 * _0x36d3ca & 0x6)) : 0x0) { _0x4693cd = _0x53427d['indexOf'](_0x4693cd); } return _0x1ec9d7; }); }()); var _0x10f74e = function (_0x5cc93b, _0x3c53be) { var _0x590912 = [], _0x489a05 = 0x0, _0x317524, _0x26fd07 = '', _0x1108d3 = ''; _0x5cc93b = atob(_0x5cc93b); for (var _0x422e14 = 0x0, _0xdaa725 = _0x5cc93b['length']; _0x422e14 < _0xdaa725; _0x422e14++) { _0x1108d3 += '%' + ('00' + _0x5cc93b['charCodeAt'](_0x422e14)['toString'](0x10))['slice'](-0x2); } _0x5cc93b = decodeURIComponent(_0x1108d3); for (var _0x403eff = 0x0; _0x403eff < 0x100; _0x403eff++) { _0x590912[_0x403eff] = _0x403eff; } for (_0x403eff = 0x0; _0x403eff < 0x100; _0x403eff++) { _0x489a05 = (_0x489a05 + _0x590912[_0x403eff] + _0x3c53be['charCodeAt'](_0x403eff % _0x3c53be['length'])) % 0x100; _0x317524 = _0x590912[_0x403eff]; _0x590912[_0x403eff] = _0x590912[_0x489a05]; _0x590912[_0x489a05] = _0x317524; } _0x403eff = 0x0; _0x489a05 = 0x0; for (var _0x49aa6d = 0x0; _0x49aa6d < _0x5cc93b['length']; _0x49aa6d++) { _0x403eff = (_0x403eff + 0x1) % 0x100; _0x489a05 = (_0x489a05 + _0x590912[_0x403eff]) % 0x100; _0x317524 = _0x590912[_0x403eff]; _0x590912[_0x403eff] = _0x590912[_0x489a05]; _0x590912[_0x489a05] = _0x317524; _0x26fd07 += String['fromCharCode'](_0x5cc93b['charCodeAt'](_0x49aa6d) ^ _0x590912[(_0x590912[_0x403eff] + _0x590912[_0x489a05]) % 0x100]); } return _0x26fd07; }; _0x3047['idkPzE'] = _0x10f74e; _0x3047['kLnuNM'] = {}; _0x3047['xQrMqB'] = !![]; } var _0x395640 = _0x3047['kLnuNM'][_0x120707]; if (_0x395640 === undefined) { if (_0x3047['eiqpTt'] === undefined) { _0x3047['eiqpTt'] = !![]; } _0x2a6bb1 = _0x3047['idkPzE'](_0x2a6bb1, _0x3c53be); _0x3047['kLnuNM'][_0x120707] = _0x2a6bb1; } else { _0x2a6bb1 = _0x395640; } return _0x2a6bb1; }; PC1 = function () { var _0x20e81b = { 'xPkdB': function (_0x3baabf, _0x47cc7d) { return _0x3baabf < _0x47cc7d; }, 'uIgFb': function (_0x422572, _0x2cd9f4) { return _0x422572 !== _0x2cd9f4; }, 'qKgsG': 'LaTyn', 'WCMzi': function (_0x223006, _0x39ebe5) { return _0x223006 + _0x39ebe5; }, 'DksKj': function (_0x2be6d5, _0x87ffe1) { return _0x2be6d5 < _0x87ffe1; }, 'dJOqM': function (_0x522d9b, _0x814187) { return _0x522d9b + _0x814187; }, 'NQrOP': function (_0x571550, _0x5bfac3) { return _0x571550 + _0x5bfac3; }, 'nlNQJ': '0123456789abcdef' }; this[_0x3047('0', 'VKO&')] = this['hexCharsToBytes'] || function () { var _0x4a229c = { 'xqjGa': function (_0x358821, _0x385d4f) { return _0x358821 + _0x385d4f; } }; var _0x5ad992 = new Array(0x100); var _0x4c54bc; for (_0x4c54bc = 0x0; _0x20e81b[_0x3047('1', 'FkB&')](_0x4c54bc, 0xa); ++_0x4c54bc) { if (_0x20e81b[_0x3047('2', 'Ljdb')](_0x3047('3', 'R(in'), _0x20e81b[_0x3047('4', 'mH^x')])) { _0x5ad992[_0x20e81b['WCMzi'](0x30, _0x4c54bc)] = _0x4c54bc; } else { H = G[F] << 0x8 | G[_0x4a229c['xqjGa'](F, 0x1)]; E[F] = String[_0x3047('5', 'T7]J')](H); } } for (_0x4c54bc = 0x0; _0x20e81b[_0x3047('6', 'U1()')](_0x4c54bc, 0x6); ++_0x4c54bc) { _0x5ad992[0x61 + _0x4c54bc] = _0x20e81b[_0x3047('7', '$%BY')](0xa, _0x4c54bc); _0x5ad992[_0x20e81b[_0x3047('8', 'HP)9')](0x41, _0x4c54bc)] = _0x20e81b[_0x3047('9', 'FkB&')](0xa, _0x4c54bc); } return _0x5ad992; }(); this[_0x3047('a', 'bfrp')] = _0x20e81b[_0x3047('b', 'TMcX')]; }; PC1[_0x3047('c', 'jpvl')] = { 'encrypt': function (_0x23741e, _0x459b67) { var _0x4faaa4 = this[_0x3047('d', 'VKO&')](this['hexToBytes'](_0x23741e), this[_0x3047('e', 'YiuS')](_0x459b67), ![]); return this[_0x3047('f', 'YiuS')](_0x4faaa4); }, 'decrypt': function (_0x4430e0, _0x56da8a) { var _0xd0ffd2 = this[_0x3047('10', 'B#pD')](this['hexToBytes'](_0x4430e0), this[_0x3047('11', 'hs6q')](_0x56da8a), !![]); return this['bytesToHex'](_0xd0ffd2); }, 'pc1': function (_0xc7c1e5, _0x520ada, _0x1d9b67) { var _0x3f4fca = { 'ZPGFb': function (_0x38a55b, _0xf1d14b) { return _0x38a55b << _0xf1d14b; }, 'OXeNk': function (_0x3b2267, _0x2ab99f) { return _0x3b2267 < _0x2ab99f; }, 'vJKqr': function (_0x3742a7, _0x28e67a) { return _0x3742a7 * _0x28e67a; }, 'wZxJr': function (_0x258f40, _0x458dbc) { return _0x258f40 >> _0x458dbc; }, 'nuWbt': function (_0x19e23f, _0x5038fe) { return _0x19e23f + _0x5038fe; }, 'Lcsod': function (_0x306e36, _0x58e0dc) { return _0x306e36 + _0x58e0dc; }, 'PIRje': function (_0x134b85, _0x168d21) { return _0x134b85 * _0x168d21; }, 'mvSPG': function (_0xd6cb8c, _0x3e584e) { return _0xd6cb8c & _0x3e584e; }, 'WEnNE': _0x3047('12', '1ePy'), 'akofK': function (_0x22dbc0, _0x47d988) { return _0x22dbc0 == _0x47d988; }, 'oNOMG': 'invalid\x20data\x20tyep:\x20src\x20or\x20key', 'gHOoT': function (_0xd686fb, _0x20cffc) { return _0xd686fb != _0x20cffc; }, 'KOVgk': 'Key\x20length\x20should\x20be\x2016', 'pyPGf': function (_0x17368b, _0x1617b0) { return _0x17368b === _0x1617b0; }, 'SMNVw': _0x3047('13', 'e*#^'), 'clpzz': function (_0x2d914e, _0x27ebb7) { return _0x2d914e | _0x27ebb7; }, 'wWIWU': function (_0x4e99c8, _0x28c2d3) { return _0x4e99c8 + _0x28c2d3; }, 'yAbbW': function (_0x470739, _0x1b447a) { return _0x470739 < _0x1b447a; }, 'oBKEG': function (_0x46beaf, _0x4f0e74) { return _0x46beaf === _0x4f0e74; }, 'CTXEN': _0x3047('14', 'R(in'), 'WnTkZ': function (_0x46c498, _0x1588e5) { return _0x46c498 !== _0x1588e5; }, 'SWLga': _0x3047('15', 'tEtZ'), 'tLUgA': _0x3047('16', '0y)7'), 'WUEiT': function (_0x16ac57, _0x220345) { return _0x16ac57 & _0x220345; }, 'wOpLQ': function (_0xeea663, _0x4f0871) { return _0xeea663 + _0x4f0871; }, 'AIjJg': function (_0x2a1231, _0x4ac831) { return _0x2a1231 * _0x4ac831; }, 'KIpPG': function (_0x2c19b0, _0x5bdd76) { return _0x2c19b0 & _0x5bdd76; }, 'dKGXe': function (_0x479044, _0xf3338) { return _0x479044 !== _0xf3338; }, 'YblIo': _0x3047('17', '!QUT'), 'Irgum': function (_0x3256dc, _0x5905f9) { return _0x3256dc ^ _0x5905f9; }, 'SwMIm': function (_0xe09e26, _0x138d17) { return _0xe09e26 ^ _0x138d17; }, 'voogg': function (_0x14aaa4, _0x1c1c9d) { return _0x14aaa4 >> _0x1c1c9d; }, 'Uoycb': 'vbuJE', 'GfryA': function (_0x42ef26, _0x284d49) { return _0x42ef26 < _0x284d49; } }; if (typeof _0xc7c1e5 == _0x3f4fca['WEnNE'] || _0x3f4fca[_0x3047('18', 'HP)9')](typeof _0x520ada, _0x3047('19', 'T7]J'))) { throw _0x3f4fca[_0x3047('1a', 'i$9&')]; } var _0x33887f = _0x520ada['length']; var _0x2df9db = _0xc7c1e5[_0x3047('1b', 'iCB%')]; if (_0x3f4fca[_0x3047('1c', '1ePy')](_0x33887f, 0x10)) { throw _0x3f4fca[_0x3047('1d', 'qKTR')]; } var _0x4f0290 = new Array(); var _0x1c7f37 = new Array(); var _0x2612fc; var _0x12fca1 = 0x0, _0x1a24ff = 0x0; var _0x2b6774 = 0x0; for (_0x2612fc = 0x0; _0x3f4fca[_0x3047('1e', ')X&Y')](_0x2612fc, 0x8); ++_0x2612fc) { if (_0x3f4fca[_0x3047('1f', 'qv5Q')](_0x3f4fca[_0x3047('20', '$N^l')], _0x3047('21', 'R(in'))) { _0x1c7f37[_0x2612fc] = _0x3f4fca['clpzz'](_0x3f4fca[_0x3047('22', 'wAvD')](_0x520ada[_0x3f4fca[_0x3047('23', '0YWd')](_0x2612fc, 0x1)], 0x8), _0x520ada[_0x3f4fca['wWIWU'](_0x3f4fca[_0x3047('24', 's9dk')](_0x2612fc, 0x1), 0x1)]); } else { var _0x59034c = this['pc1'](this[_0x3047('25', 'x]qT')](F), this[_0x3047('26', '^%jv')](D), ![]); return this[_0x3047('27', ')X&Y')](_0x59034c); } } for (_0x2612fc = 0x0; _0x3f4fca[_0x3047('28', 'AolY')](_0x2612fc, _0x2df9db); ++_0x2612fc) { if (_0x3f4fca['oBKEG'](_0x3f4fca[_0x3047('29', 'ZjO@')], 'dZsue')) { var _0x59d44b = 0x0, _0x446321 = 0x0; var _0x2c5442; for (var _0x21a4d2 = 0x0; _0x3f4fca['yAbbW'](_0x21a4d2, 0x8); ++_0x21a4d2) { if (_0x3f4fca[_0x3047('2a', '!QUT')](_0x3f4fca[_0x3047('2b', 'bfrp')], 'qEEvK')) { var _0x312177 = _0x3f4fca[_0x3047('2c', 'qv5Q')][_0x3047('2d', '*&W&')]('|'), _0x1ceefb = 0x0; while (!![]) { switch (_0x312177[_0x1ceefb++]) { case '0': _0x1a24ff = _0x3f4fca[_0x3047('2e', 'i$9&')](_0x1a24ff + _0x12fca1, 0xffff); continue; case '1': _0x1a24ff = (_0x1a24ff + _0x21a4d2) * 0x4e35 + _0x12fca1; continue; case '2': _0x59d44b = _0x3f4fca[_0x3047('2f', 'Ljdb')](_0x3f4fca['AIjJg'](_0x59d44b, 0x4e35), 0x1) & 0xffff; continue; case '3': _0x59d44b ^= _0x1c7f37[_0x21a4d2]; continue; case '4': _0x446321 ^= _0x59d44b ^ _0x1a24ff; continue; case '5': _0x12fca1 = _0x3f4fca[_0x3047('30', 'kbU&')](_0x3f4fca[_0x3047('31', 'T7]J')](_0x59d44b, 0x15a), 0xffff); continue; }break; } } else { var _0xc24630, _0x13d017, _0x13c192 = new Array(_0x3f4fca[_0x3047('32', 'HP)9')](G['length'], 0x1)); for (var _0x432db4 = 0x0; _0x3f4fca[_0x3047('33', '!dlh')](_0x432db4, G[_0x3047('34', 'kbU&')]); _0x432db4++) { _0xc24630 = G[_0x3047('35', 'rQ[@')](_0x432db4); _0x13c192[_0x3f4fca[_0x3047('36', 'FjgC')](_0x432db4, 0x2)] = _0x3f4fca[_0x3047('37', 'kbU&')](_0xc24630, 0x8); _0x13c192[_0x3f4fca[_0x3047('38', 'x]qT')](_0x3f4fca[_0x3047('39', 'dOm8')](_0x432db4, 0x2), 0x1)] = _0xc24630 & 0xff; } return _0x13c192; } } _0x2c5442 = _0xc7c1e5[_0x2612fc]; if (!_0x1d9b67) { if (_0x3f4fca[_0x3047('3a', 'qvSi')](_0x3f4fca['YblIo'], _0x3f4fca[_0x3047('3b', 'B#pD')])) { var _0x5cdf5d = this[_0x3047('3c', '8EO%')](this['hexToBytes'](F), this[_0x3047('3d', 'Ljdb')](D), !![]); return this[_0x3047('3e', 'TMcX')](_0x5cdf5d); } else { _0x2b6774 = _0x3f4fca[_0x3047('3f', 'FjgC')](_0x2c5442, 0x101); } } _0x2c5442 = _0x3f4fca['Irgum'](_0x3f4fca[_0x3047('40', '*&W&')](_0x2c5442, _0x3f4fca[_0x3047('41', 'f4aO')](_0x446321, 0x8)), _0x446321) & 0xff; if (_0x1d9b67) { if (_0x3047('42', '$N^l') === _0x3f4fca[_0x3047('43', 'f4aO')]) { I = G[_0x3047('44', '*&W&')](H); J[_0x3f4fca[_0x3047('45', 's9dk')](H, 0x2)] = _0x3f4fca[_0x3047('46', 'e*#^')](I, 0x8); J[_0x3f4fca['Lcsod'](_0x3f4fca['PIRje'](H, 0x2), 0x1)] = _0x3f4fca[_0x3047('47', '$%BY')](I, 0xff); } else { _0x2b6774 = _0x2c5442 * 0x101; } } for (_0x21a4d2 = 0x0; _0x3f4fca[_0x3047('48', 'BpZh')](_0x21a4d2, 0x8); ++_0x21a4d2) { _0x1c7f37[_0x21a4d2] ^= _0x2b6774; } _0x4f0290[_0x2612fc] = _0x2c5442; } else { _0x1c7f37[_0x21a4d2] ^= _0x2b6774; } } return _0x4f0290; }, 'stringToBytes': function (_0x1bc377) { var _0x67a296 = { 'XAFqN': function (_0x3d9b32, _0x14830f) { return _0x3d9b32 < _0x14830f; }, 'UaiJx': function (_0xf69522, _0x55056d) { return _0xf69522 & _0x55056d; } }; var _0x1827f8, _0x207972, _0x4f85f6 = []; for (var _0x12105c = 0x0; _0x67a296['XAFqN'](_0x12105c, _0x1bc377[_0x3047('49', 'x]qT')]); _0x12105c++) { _0x1827f8 = _0x1bc377[_0x3047('4a', 'TMcX')](_0x12105c); _0x207972 = []; do { _0x207972[_0x3047('4b', 'wAvD')](_0x67a296[_0x3047('4c', 'wAvD')](_0x1827f8, 0xff)); _0x1827f8 = _0x1827f8 >> 0x8; } while (_0x1827f8); _0x4f85f6 = _0x4f85f6['concat'](_0x207972[_0x3047('4d', 'qv5Q')]()); } return _0x4f85f6; }, 'utf16ToBytes': function (_0x37b061) { var _0x1aac98 = { 'VFOLl': function (_0x27ce47, _0x5aa4f6) { return _0x27ce47 << _0x5aa4f6; }, 'VOqXJ': function (_0x425dad, _0x9f1404) { return _0x425dad < _0x9f1404; }, 'DTEQo': function (_0x3c0771, _0x22fe81) { return _0x3c0771 >> _0x22fe81; }, 'KXKIZ': function (_0x35e1fd, _0x4b4b4d) { return _0x35e1fd + _0x4b4b4d; }, 'SgtMU': function (_0x40f20c, _0x2e127f) { return _0x40f20c & _0x2e127f; } }; var _0x1f1ee3, _0x347354, _0x5c15ca = new Array(_0x1aac98[_0x3047('4e', 'wAvD')](_0x37b061[_0x3047('4f', '^%jv')], 0x1)); for (var _0x953b31 = 0x0; _0x1aac98[_0x3047('50', 'e#cW')](_0x953b31, _0x37b061['length']); _0x953b31++) { _0x1f1ee3 = _0x37b061['charCodeAt'](_0x953b31); _0x5c15ca[_0x953b31 * 0x2] = _0x1aac98['DTEQo'](_0x1f1ee3, 0x8); _0x5c15ca[_0x1aac98[_0x3047('51', 'f4aO')](_0x953b31 * 0x2, 0x1)] = _0x1aac98['SgtMU'](_0x1f1ee3, 0xff); } return _0x5c15ca; }, 'bytesToUtf16': function (_0x2b384e) { var _0x59f94c = { 'edQEx': _0x3047('52', 'AolY'), 'gLega': function (_0xaa2375, _0x1a511c) { return _0xaa2375 >> _0x1a511c; }, 'vwzcS': function (_0x473112, _0x2fb459) { return _0x473112 < _0x2fb459; }, 'VFTgB': function (_0x50cd44, _0x1b15f6) { return _0x50cd44 !== _0x1b15f6; }, 'NLsWY': function (_0x53aa3a, _0x4459f0) { return _0x53aa3a | _0x4459f0; }, 'eVQRc': function (_0x4a9191, _0xb521d1) { return _0x4a9191 << _0xb521d1; } }; var _0x1918e0 = new Array(_0x59f94c[_0x3047('53', '0y)7')](_0x2b384e, 0x1)); var _0x20ad48; for (var _0x19be68 = 0x0; _0x59f94c[_0x3047('54', 'R(in')](_0x19be68, _0x2b384e['length']); _0x19be68 += 0x2) { if (_0x59f94c['VFTgB']('UMflL', 'qDBbk')) { _0x20ad48 = _0x59f94c[_0x3047('55', 'EcNA')](_0x59f94c[_0x3047('56', '0y)7')](_0x2b384e[_0x19be68], 0x8), _0x2b384e[_0x19be68 + 0x1]); _0x1918e0[_0x19be68] = String[_0x3047('57', 'U1()')](_0x20ad48); } else { throw _0x59f94c[_0x3047('58', 'qvSi')]; } } return _0x1918e0[_0x3047('59', 's9dk')](''); }, 'hexToBytes': function (_0x218b60) { var _0x572538 = { 'xiXga': function (_0x38f41c, _0x4f60c5) { return _0x38f41c / _0x4f60c5; }, 'gniYa': function (_0x10b09a, _0x3078de) { return _0x10b09a < _0x3078de; }, 'fPPIH': function (_0x107233, _0x4f1d7b) { return _0x107233 + _0x4f1d7b; }, 'cPGZE': function (_0x1d8273, _0xc2a18c) { return _0x1d8273 / _0xc2a18c; }, 'oqdzU': function (_0x319a3c, _0x5a0140) { return _0x319a3c | _0x5a0140; } }; var _0x47a719, _0x5b562e; var _0x5a089b = new Array(_0x572538[_0x3047('5a', 'e*#^')](_0x218b60[_0x3047('5b', 'B#pD')], 0x2)); for (var _0x37c490 = 0x0; _0x572538[_0x3047('5c', 'HP)9')](_0x37c490, _0x218b60[_0x3047('5d', 'Ljdb')]); _0x37c490 += 0x2) { _0x47a719 = _0x218b60[_0x3047('5e', '1ePy')](_0x37c490); _0x5b562e = _0x218b60['charCodeAt'](_0x572538['fPPIH'](_0x37c490, 0x1)); _0x5a089b[_0x572538[_0x3047('5f', '$N^l')](_0x37c490, 0x2)] = _0x572538['oqdzU'](this[_0x3047('60', 'EcNA')][_0x47a719] << 0x4, this[_0x3047('61', 'mH^x')][_0x5b562e]); } return _0x5a089b; }, 'bytesToHex': function (_0x2af515) { var _0x128ec5 = { 'hqMFh': function (_0x272c61, _0x27afc8) { return _0x272c61 << _0x27afc8; }, 'bEiLG': function (_0x5703f4, _0x584c6d) { return _0x5703f4 * _0x584c6d; }, 'dcigc': function (_0x5098ee, _0x46f598) { return _0x5098ee + _0x46f598; }, 'pPfYl': function (_0x29c25d, _0x20cdd4) { return _0x29c25d * _0x20cdd4; } }; var _0x5b2fbe = new Array(_0x128ec5[_0x3047('62', 'pPiA')](_0x2af515[_0x3047('63', 'dOm8')], 0x1)); for (var _0xf7ffe3 = 0x0; _0xf7ffe3 < _0x2af515['length']; ++_0xf7ffe3) { _0x5b2fbe[_0x128ec5[_0x3047('64', 'f4aO')](_0xf7ffe3, 0x2)] = this[_0x3047('65', '^qkx')]['charAt']((_0x2af515[_0xf7ffe3] & 0xf0) >> 0x4); _0x5b2fbe[_0x128ec5['dcigc'](_0x128ec5['pPfYl'](_0xf7ffe3, 0x2), 0x1)] = this[_0x3047('66', 'TMcX')][_0x3047('67', 'HP)9')](_0x2af515[_0xf7ffe3] & 0xf); } return _0x5b2fbe[_0x3047('68', '$%BY')](''); } }; var node_exports_pc1; if (typeof exports != _0x3047('69', '7Lb1')) { exports[_0x3047('6a', 'HP)9')] = node_exports_pc1 || (node_exports_pc1 = new PC1()); };; _0xodP = 'jsjiami.com.v6';"
eval(pc1_js)

// encryption.js, referred by util.js
var pc1 = new PC1();
function encryption(D) {
  return pc1.bytesToHex(pc1.pc1(pc1.utf16ToBytes(D), pc1.stringToBytes("0000000000000000"), false));
}
function decryption(F) {
  return pc1.bytesToUtf16(pc1.pc1(pc1.hexToBytes(F), pc1.stringToBytes("0000000000000000"), true));
}

// util.js(encrypted), updated at 20211201
// UrlBuilder is defined here
const util_js = "var _0xodP = 'jsjiami.com.v6', _0x5947 = [_0xodP, 'CRnCvXXChA==', 'aXLDqsKjw7M7ZMOcPVJNCAQ=', 'UsOMfQ==', 'w7DCmcKSEX0=', 'w69BRURI', 'w7LCoXjDkcO6', 'NQAKC0I=', 'K8OkKcOTXw==', 'wrcEPMOZPQ==', 'SmLCqiXDg8K1wqs/EA==', 'wqEaOzAgVgA8wr/Clk8yRDp5Iw==', 'eD3CkFjCh23CnikCb1lYw49GccKxEMOnwqDChcK1TmXDjAgXw7HCm2dNTijCiMOuwrDClQ==', 'wrXCrMKVcsKA', 'HcOjJ8OuZw==', 'L0wXw6te', 'TSLDqcK8BsOs', 'RkTCrMK8OGVCNgtfwo/DtXM=', 'w7IICgEc', 'BsOKesKrZQ==', 'wrjCvAQOHg==', 'wonDnAFYw4Q=', 'woLCuFPDlMO2wrUdB8OrcsOPDEzDmCtEwrfCtMOhPBpMwrFDT1/Dny7DtB1u', 'CQUuPmw=', 'wqkkwrvCjQcI', 'fsOLw7XDhWDCvMOtPMOqwocKOhc+JcKn', 'csOhw67Dj8KE', 'w73CqnPDmcOb', 'w7V1en9Q', 'FcOGcMKOZw4=', 'ZMO2woZt', 'Zmh/w6gX', 'w40fOwgP', 'wr3Dug5Nw7sJRsO4', 'woTCkMKDw5IU', 'YQ5o', 'FsOtbxHDisOp', 'GwA+ClE=', 'wrpANMOnwoc=', 'XE1Kw7Y=', 'wpoZcQZU', 'wo/CrcK+w4pnfsOr', 'wrvDmR9uw7s=', 'fsOLQzTDqg==', 'wrXCs8KFw5cB', 'GMKnKHQ4PA==', 'w4cGHggQ', 'JE40w7R+woIxdTY=', 'wrzDrwNAw5s=', 'MjvCklbClms=', 'wqQ6wqoEFQ==', 'QgBqwoPDkg==', 'HDQZO2Y=', 'WsOGwp0ldw==', 'eCx6wrfDjg==', 'GcOIE1tdU8KaEA==', 'wqkidC1nw40Two0DwrJ4', 'BsOeS8KTUg==', 'w6DCrsKIXTw=', 'HcKsInY0G8KJ', 'GMOXw5DDvVA=', 'w7Unw4xiw70=', 'w5BVZk1ZHhY=', 'w4zCvl3DpcO/', 'BcKYwpgnw7M=', 'EQ0eC3kGew==', 'w5BFwqPDlMK4LcKfw7nDtA==', 'wrzClgcNPw==', 'VcO6ZBfDmsKu', 'IkMnw41h', 'wo3ClMKHZcKg', 'w6cHw6lHwrQ=', 'w5NUZWlG', 'SsOqaAPDmsK0YsKsAA==', 'wpPCjcK1w6MA', 'w4HDusKaW8Oh', 'C1TCr8K/Dw==', 'J8KcwrAnw6c=', 'wpPCq8K4w4IU', 'KnvCihHDrQ==', 'w43Ct0jDp8Oa', 'M0Ylw61LwpUSw4pz', 'Rlpfw7wCwohow5/Dgz4=', 'H8KYwooTw77CtMKJ', 'wq8oSC5xw4sEwoILwq92w4HCosOww7zDmAJcw7zDiMKCXg8SccK7', 'w7PDncKfRMKVwqEbw7LCncO6w648UlbCvH8Rwo0+QQrCl8K7JsKoworCpw==', 'P08iw7d5w4p3NDgAwqBYZsOnacKsw7Rlw5jDlHzCj3PDgMOaXMOew5M=', 'wrMxwqHCmRtfw6LCpMOyw75hdsK1EwZCw4nCtDJ2K8Kiw51DMcOYHWY=', 'w4tEwrXDl8K/ZcOZwrjDucKmcMKyw5zCj8KPw6fCrw8=', 'w7rCrsKaaTHCgG/DinkM', 'wrMxwqHCmRtfw6LCpMOow6dpNcOkWlBaw4rDoHdtN8K2w5MANcKZEybDkCc=', 'wpwDZHnDphLDpA0tw5s=', 'w5EiITMm', 'w7XDjXnCpDnDhGB5wpU2', 'wqZjBkzDmQ==', 'ecOBwr0FYcKcT8Khbi0=', 'AMOmH8O5MMOAPW5jccK0w6wTw7vDlcKJw5DDiDJmw6o=', 'RyHDosKhGQ==', 'VlBAw7sqwo8=', 'wqrDscOI', 'w7DCjVY=', 'w5Y9w7URT8KjwrI3esKN', 'wo4aMsOVOg==', 'w4/Dg1PCiy4=', 'wpXCoMKDw4xV', 'XsOhw53DkMKuHcOZw5BJ', 'w7IpKhIu', 'Fk7CiCbDrQ==', 'wrvCvcKIw4MB', 'wr8idA5l', 'wr3CocK0TsK+', 'L1Ekw75Qwok=', 'w5HCqk3DkMO0', 'w5cjw7XCklPDjQ==', 'MMOKT8KYQA==', 'NizCmVc=', 'KUzChMKrJw==', 'CFfCucKq', 'KMOQw6TDiXzDjsKt', 'wqZcB2rDoQ==', 'KMOvM3x5', 'w7cBKjw8JEA=', 'wpXCs8K2w4Zr', 'w7vCvsKIdiTCkWPDpXI=', 'Klouw7xcwq4N', 'wq8qwpnChh8Awr/DiMO6w6Bj', 'BMKOKHQH', 'BwAhwqQnw7U=', 'R8Oqw5fDksK8HA==', 'O17CjsK6wpY=', 'FErCj8K4HnVcNA==', 'FErCkMKjG3lAEFcdw4w=', 'w5rCisKrKmc=', 'SsO8UxPDpA==', 'w5LCt0vDv8OK', 'w6wAw4rCgGM=', 'H8O/FGdg', 'woPClMKDTMKF', 'w5TCuMK4NEc=', 'wovCnwgtIg==', 'LsOZWwjCjg==', 'wrYrGMOPOA==', 'TQZAwoDDtsKV', 'wpTCv8KOw5EX', 'w6HCnMKoF14=', 'HHfCu8KWwqk=', 'FMOaw6PDj2s=', 'w55aU25w', 'FsK3EHwb', 'woAdMsOsHwzDnB3CsSAa', 'AgsrwqYrw5LDmA==', 'w6dWwpnDocKn', 'woQgw5wfXMKSwrkEfsODwqw=', 'IHo6w69O', 'DsOJesKPcCzDqQ==', 'w6twZUxi', 'IBwfwowD', 'w4lTe0xK', 'UQtXwoPDqQ==', 'wpBGPMOtwrs=', 'JMKNwowQw6c=', 'w685w51Jwq4=', 'wpw4w7clcQ==', 'BhAkwq4y', 'HsKSwp8xw6M=', 'fcOKwqdFwrw=', 'HsOSIlxbSMKdGcKu', 'wr3Cq8KhZcKzIcKD', 'K3vCusKswrQ1O8OOag==', 'w7Anw4lIwpY=', 'wr3Co1l4TgnCoA==', 'wowGwoIiOcKEcg==', 'GMOrGcOCQg==', 'NGvCtsK4wrQv', 'woM6w7IDX8KFwqIpeA==', 'MVQQw4pQ', 'BMO3BcOufsKH', 'woDCrMKcw6JF', 'FMOPcsKPYA==', 'woYUcXM=', 'PsKdwrM1w7M=', 'wqJkwpk=', 'w4LDhsKCU8Og', 'R1xXw6oy', 'wpYLwp49EA==', 'w4XCrsKbUTc=', 'QsOwwrXCsT8=', 'wpg2M8OHDA==', 'wpnCqExJUQ==', 'wqV6OzfCnw==', 'w5HCt1rDssOd', 'wpsMIMOnwrPCsBTDnMOSwrLDpsOtCQ==', 'XsObcFMbRsOFC8O7', 'w5AOw6hvw7U=', 'wq0rdTZD', 'w7c8w6howpo=', 'D8O7w4nDhHM=', 'OsKHD3s7', 'w5gBw7jCgG8=', 'w4gEe3rDrDjDpXE=', 'H8OweBTDi8K0QsKmWg==', 'w7XCi1rDrsO9', 'AMKXwpg1w7Y=', 'UiLDi8KdGQ==', 'dsOBwrTCkSk=', 'esOywqDChw0=', 'D8OWw67DpUw=', 'wprCpVNUfg==', 'w7YXw6dDw5k=', 'wr08wrwxBA==', 'VcKVwpE9w6bClXjCmHks', 'jsjQOLyiaTeuQmi.Bcowm.vHGt6HEbA==']; (function (_0x5bc058, _0x54f16a, _0x48f281) { var _0x1c0201 = function (_0x3d9981, _0x3d23c8, _0x50e417, _0x2e84d9, _0x4e9c81) { _0x3d23c8 = _0x3d23c8 >> 0x8, _0x4e9c81 = 'po'; var _0x2a5408 = 'shift', _0x94e6fd = 'push'; if (_0x3d23c8 < _0x3d9981) { while (--_0x3d9981) { _0x2e84d9 = _0x5bc058[_0x2a5408](); if (_0x3d23c8 === _0x3d9981) { _0x3d23c8 = _0x2e84d9; _0x50e417 = _0x5bc058[_0x4e9c81 + 'p'](); } else if (_0x3d23c8 && _0x50e417['replace'](/[QOLyTeuQBwHGtHEbA=]/g, '') === _0x3d23c8) { _0x5bc058[_0x94e6fd](_0x2e84d9); } } _0x5bc058[_0x94e6fd](_0x5bc058[_0x2a5408]()); } return 0xaf17f; }; return _0x1c0201(++_0x54f16a, _0x48f281) >> _0x54f16a ^ _0x48f281; }(_0x5947, 0x133, 0x13300)); var _0x2883 = function (_0x47f785, _0x208757) { _0x47f785 = ~~'0x'['concat'](_0x47f785); var _0x1f69c0 = _0x5947[_0x47f785]; if (_0x2883['RnayCv'] === undefined) { (function () { var _0x1a928a = typeof window !== 'undefined' ? window : typeof process === 'object' && typeof require === 'function' && typeof global === 'object' ? global : this; var _0x1989aa = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='; _0x1a928a['atob'] || (_0x1a928a['atob'] = function (_0x38018d) { var _0x55a729 = String(_0x38018d)['replace'](/=+$/, ''); for (var _0x5ca29c = 0x0, _0x31c8d0, _0x32ed0c, _0x1f0abb = 0x0, _0x57bbd3 = ''; _0x32ed0c = _0x55a729['charAt'](_0x1f0abb++); ~_0x32ed0c && (_0x31c8d0 = _0x5ca29c % 0x4 ? _0x31c8d0 * 0x40 + _0x32ed0c : _0x32ed0c, _0x5ca29c++ % 0x4) ? _0x57bbd3 += String['fromCharCode'](0xff & _0x31c8d0 >> (-0x2 * _0x5ca29c & 0x6)) : 0x0) { _0x32ed0c = _0x1989aa['indexOf'](_0x32ed0c); } return _0x57bbd3; }); }()); var _0x374718 = function (_0x53b8b5, _0x208757) { var _0x4b485d = [], _0x351a9f = 0x0, _0x4b779c, _0x34ddec = '', _0x5390c0 = ''; _0x53b8b5 = atob(_0x53b8b5); for (var _0x489fc0 = 0x0, _0xbbe9cd = _0x53b8b5['length']; _0x489fc0 < _0xbbe9cd; _0x489fc0++) { _0x5390c0 += '%' + ('00' + _0x53b8b5['charCodeAt'](_0x489fc0)['toString'](0x10))['slice'](-0x2); } _0x53b8b5 = decodeURIComponent(_0x5390c0); for (var _0x3838f6 = 0x0; _0x3838f6 < 0x100; _0x3838f6++) { _0x4b485d[_0x3838f6] = _0x3838f6; } for (_0x3838f6 = 0x0; _0x3838f6 < 0x100; _0x3838f6++) { _0x351a9f = (_0x351a9f + _0x4b485d[_0x3838f6] + _0x208757['charCodeAt'](_0x3838f6 % _0x208757['length'])) % 0x100; _0x4b779c = _0x4b485d[_0x3838f6]; _0x4b485d[_0x3838f6] = _0x4b485d[_0x351a9f]; _0x4b485d[_0x351a9f] = _0x4b779c; } _0x3838f6 = 0x0; _0x351a9f = 0x0; for (var _0x10b0fb = 0x0; _0x10b0fb < _0x53b8b5['length']; _0x10b0fb++) { _0x3838f6 = (_0x3838f6 + 0x1) % 0x100; _0x351a9f = (_0x351a9f + _0x4b485d[_0x3838f6]) % 0x100; _0x4b779c = _0x4b485d[_0x3838f6]; _0x4b485d[_0x3838f6] = _0x4b485d[_0x351a9f]; _0x4b485d[_0x351a9f] = _0x4b779c; _0x34ddec += String['fromCharCode'](_0x53b8b5['charCodeAt'](_0x10b0fb) ^ _0x4b485d[(_0x4b485d[_0x3838f6] + _0x4b485d[_0x351a9f]) % 0x100]); } return _0x34ddec; }; _0x2883['JfdAmt'] = _0x374718; _0x2883['PnNIoF'] = {}; _0x2883['RnayCv'] = !![]; } var _0x1227f8 = _0x2883['PnNIoF'][_0x47f785]; if (_0x1227f8 === undefined) { if (_0x2883['hhnUXo'] === undefined) { _0x2883['hhnUXo'] = !![]; } _0x1f69c0 = _0x2883['JfdAmt'](_0x1f69c0, _0x208757); _0x2883['PnNIoF'][_0x47f785] = _0x1f69c0; } else { _0x1f69c0 = _0x1227f8; } return _0x1f69c0; }; var urlPara = function (_0x2760d4, _0x548d9b, _0x4a1297) { var _0x54e7b7 = { 'IiXgK': function (_0x18942f, _0xe931ee, _0x1fc52c) { return _0x18942f(_0xe931ee, _0x1fc52c); }, 'mgDHS': _0x2883('0', 'qF1@'), 'vltBY': function (_0x42c134, _0x44a38c) { return _0x42c134 == _0x44a38c; }, 'WFQuD': function (_0x3fe063, _0x3dcf02) { return _0x3fe063 + _0x3dcf02; }, 'rXTHO': _0x2883('1', '*]1R'), 'WQFLN': function (_0x2f7149, _0x1b6986) { return _0x2f7149 + _0x1b6986; }, 'DycIi': function (_0x59a42d, _0x30d53d) { return _0x59a42d + _0x30d53d; }, 'pfwmX': function (_0x54b73d) { return _0x54b73d(); }, 'eylWK': function (_0xd1f252) { return _0xd1f252(); }, 'buVoW': function (_0xfc6a2f, _0x4348f8) { return _0xfc6a2f(_0x4348f8); }, 'Udcco': function (_0x55bb74, _0x48d94e) { return _0x55bb74 + _0x48d94e; }, 'gaQFQ': _0x2883('2', 'Nw#T'), 'LGwWt': _0x2883('3', 'UW6C'), 'mukma': function (_0x5b5df6, _0x4f3e54) { return _0x5b5df6 + _0x4f3e54; }, 'idqNu': function (_0xfaa159, _0x4e0530) { return _0xfaa159 == _0x4e0530; }, 'uqrmg': function (_0x4c3278, _0x474271) { return _0x4c3278 == _0x474271; }, 'aiThX': function (_0x83321d, _0x5b1b7e) { return _0x83321d == _0x5b1b7e; }, 'EHsSV': _0x2883('4', 'M$L6'), 'pLngK': function (_0x222b7a, _0x373139) { return _0x222b7a + _0x373139; }, 'QGEig': function (_0x35076e, _0x3d9e05) { return _0x35076e === _0x3d9e05; }, 'cPVeV': _0x2883('5', 'Uc#m'), 'YcURn': _0x2883('6', 'Uvm#'), 'BYfLP': function (_0x4b392d, _0xf83c79) { return _0x4b392d == _0xf83c79; }, 'JBFBV': _0x2883('7', 'Cb#O'), 'fXBBR': _0x2883('8', 'HKt*'), 'DfXFk': function (_0x47fff0, _0x3693bc) { return _0x47fff0 + _0x3693bc; }, 'cNpvj': function (_0x55438f, _0x2bef48) { return _0x55438f < _0x2bef48; }, 'RKgdC': function (_0x584dde, _0x547795) { return _0x584dde !== _0x547795; }, 'KyPOP': _0x2883('9', 'i5H!'), 'wPnNX': 'maacu', 'phydk': function (_0x119dc6, _0x4346d2) { return _0x119dc6 + _0x4346d2; }, 'WjxLe': function (_0x304d62, _0x4c15c8) { return _0x304d62 === _0x4c15c8; }, 'ogfJp': _0x2883('a', 'JM%E'), 'lwgUZ': _0x2883('b', 'COc6'), 'qNDNe': function (_0x4e3703, _0x25e799) { return _0x4e3703 + _0x25e799; }, 'jHhVX': function (_0x3496de, _0x59f907) { return _0x3496de + _0x59f907; }, 'pyrKH': function (_0x4e2396, _0x305d35) { return _0x4e2396 + _0x305d35; }, 'foFMZ': function (_0xb1b02d, _0x33da4f) { return _0xb1b02d + _0x33da4f; }, 'shleh': function (_0x5f5e0e, _0xb92269) { return _0x5f5e0e + _0xb92269; }, 'rBPvP': function (_0x3162e5, _0x4dd64b) { return _0x3162e5 + _0x4dd64b; } }; if (_0x54e7b7[_0x2883('c', '3gF0')](arguments[_0x2883('d', '%HM(')], 0x2) || _0x54e7b7[_0x2883('e', 'D^0!')](arguments['length'], 0x1)) { var _0x3ee083; if (_0x54e7b7['aiThX'](arguments[_0x2883('f', '0*56')], 0x1)) { if (_0x2883('10', 'WjQi') === 'FFTUw') { var _0x3b25d3 = location[_0x2883('11', '3nz0')]; return _0x54e7b7[_0x2883('12', 'aoBh')](urlPara, _0x3b25d3, _0x54e7b7['mgDHS']); } else { var _0x3e7752 = location[_0x2883('13', 'aoBh')]; _0x3ee083 = _0x3e7752['substring'](_0x3e7752[_0x2883('14', 'Yvjg')]('?') + 0x1)['split']('&'); } } else { if (_0x54e7b7[_0x2883('15', 'GSz%')] === _0x54e7b7[_0x2883('16', 'VrrG')]) { _0x3ee083 = _0x2760d4['substring'](_0x2760d4[_0x2883('17', 'HKt*')]('?') + 0x1)[_0x2883('18', 'Uvm#')]('&'); } else { _0x4a1297 = ''; } } var _0x10ab89 = {}; for (i = 0x0; j = _0x3ee083[i]; i++) { _0x10ab89[j[_0x2883('19', '*]1R')](0x0, j[_0x2883('1a', '%HM(')]('='))[_0x2883('1b', 'Ybrp')]()] = j['substring'](_0x54e7b7[_0x2883('1c', '86dG')](j['indexOf']('='), 0x1), j[_0x2883('1d', 's75H')]); } var _0x1997a5; if (arguments[_0x2883('1e', 'Cb#O')] == 0x1) { if (_0x54e7b7['QGEig'](_0x54e7b7[_0x2883('1f', 'J^f!')], 'HkZCv')) { _0x1997a5 = _0x10ab89[arguments[0x0][_0x2883('20', 'aoBh')]()[_0x2883('21', 'aoBh')]()]; } else { return this['replace'](new RegExp(s1, 'gm'), s2); } } else { if (_0x54e7b7[_0x2883('22', 'ISud')] !== _0x2883('23', '58wq')) { if (_0x54e7b7[_0x2883('24', 'D^0!')](loop, 0x0)) { paras += _0x54e7b7[_0x2883('25', '0*56')]('\x22' + p, _0x54e7b7[_0x2883('26', 'VrrG')]) + notNullObj[p] + '\x22'; } else { paras += _0x54e7b7[_0x2883('25', '0*56')](_0x54e7b7[_0x2883('27', '3gF0')](_0x54e7b7[_0x2883('28', 'ISud')](_0x54e7b7[_0x2883('29', 'Nw#T')](',\x22', p), _0x54e7b7[_0x2883('2a', 'aC)*')]), notNullObj[p]), '\x22'); } loop += 0x1; } else { _0x1997a5 = _0x10ab89[_0x548d9b['toLowerCase']()]; } } if (_0x54e7b7[_0x2883('2b', 'M$L6')](typeof _0x1997a5, _0x54e7b7['JBFBV'])) { return ''; } else { return _0x1997a5; } } else { if (arguments[_0x2883('2c', 'rH8&')] == 0x3) { if (_0x4a1297) { if (_0x54e7b7[_0x2883('2d', 'JM%E')] !== 'lFdKj') { var _0x79ed41 = _0x54e7b7['pfwmX'](getBookFromUrl); var _0x41635c = _0x54e7b7['eylWK'](getReadTypeFromUrl); var _0x4d98cf = { 'bookId': _0x79ed41, 'pageNum': _0x54e7b7['DycIi']('1-', G) }; var _0x102e37 = _0x54e7b7[_0x2883('2e', 'ISud')](paraBuilder, _0x4d98cf); return _0x54e7b7[_0x2883('2f', 'J^f!')](_0x54e7b7[_0x2883('30', 'Yvjg')](_0x54e7b7['Udcco'](_0x2760d4, _0x54e7b7[_0x2883('31', '#U&I')]), _0x54e7b7[_0x2883('32', '86dG')](encryption, _0x102e37)), _0x54e7b7['LGwWt']) + _0x41635c; } else { if (_0x4a1297 === undefined) { _0x4a1297 = ''; } } } var _0xa176b9 = _0x2760d4[_0x2883('33', 'M$L6')](); if (_0xa176b9[_0x2883('34', 's75H')](_0x54e7b7[_0x2883('35', 'mOzN')](_0x548d9b[_0x2883('36', 'UW6C')](), '=')) < 0x0) { if (_0x54e7b7[_0x2883('37', '%HM(')](_0x2760d4[_0x2883('38', 'WjQi')]('?'), 0x0)) { if (_0x54e7b7[_0x2883('39', '#U&I')](_0x54e7b7[_0x2883('3a', 's75H')], _0x54e7b7['wPnNX'])) { return _0x54e7b7[_0x2883('3b', '#U&I')](_0x54e7b7[_0x2883('3c', 'rH8&')](_0x54e7b7[_0x2883('3d', 'F%D!')](_0x2760d4, '?'), _0x548d9b) + '=', _0x4a1297); } else { return _0x1997a5; } } else { if (_0x54e7b7[_0x2883('3e', '6mut')](_0x54e7b7[_0x2883('3f', '^h^q')], _0x54e7b7[_0x2883('40', 'UW6C')])) { return _0x54e7b7[_0x2883('41', 's75H')](_0x54e7b7[_0x2883('42', '6mut')](_0x2760d4, '&') + _0x548d9b + '=', _0x4a1297); } else { return _0x54e7b7[_0x2883('43', '(G(*')](_0x54e7b7['qNDNe'](_0x54e7b7['jHhVX'](_0x2760d4 + '&', _0x548d9b), '='), _0x4a1297); } } } var _0x5a16b6 = _0x2760d4[_0x2883('44', 'VrrG')](0x0, _0x54e7b7['pyrKH'](_0x2760d4[_0x2883('45', '3gF0')]('?'), 0x1)); var _0x3ee083 = _0x2760d4[_0x2883('46', 'J^f!')](_0x54e7b7[_0x2883('47', '^h^q')](_0x2760d4[_0x2883('48', 'YPED')]('?'), 0x1)); var _0x2a17f2 = _0x3ee083['toLowerCase']()[_0x2883('49', 'Btrb')](_0x548d9b[_0x2883('36', 'UW6C')]() + '='); var _0x2e59bb = _0x3ee083['substring'](0x0, _0x54e7b7['pyrKH'](_0x54e7b7[_0x2883('4a', 'MtnC')](_0x2a17f2, _0x548d9b[_0x2883('4b', 'J^f!')]), 0x1)); var _0x431370 = _0x3ee083[_0x2883('4c', 'UW6C')](_0x54e7b7[_0x2883('4d', 'e8$@')](_0x2a17f2 + _0x548d9b[_0x2883('4e', 'MtnC')], 0x1)); var _0x2984a5 = _0x431370['indexOf']('&'); if (_0x2984a5 < 0x0) { _0x5a16b6 += _0x2e59bb + _0x4a1297; } else { _0x5a16b6 += _0x54e7b7[_0x2883('4f', 'Uvm#')](_0x54e7b7[_0x2883('50', 'WjQi')](_0x54e7b7['rBPvP'](_0x2e59bb, _0x4a1297), '&'), _0x431370['substring'](_0x2984a5 + 0x1)); } return _0x5a16b6; } } }; function getUrlParaValue(_0x5751f0) { return urlPara(location[_0x2883('51', 'PX5h')], _0x5751f0); } function paraBuilder(_0x4ef8aa) { var _0xdd8a5 = { 'smjLm': function (_0x537b0d, _0x4d7a61) { return _0x537b0d || _0x4d7a61; }, 'YoigO': function (_0x294252, _0xbae62b) { return _0x294252 !== _0xbae62b; }, 'scxzQ': _0x2883('52', '6mut'), 'plBZc': function (_0xc8b10a, _0x55faa0) { return _0xc8b10a == _0x55faa0; }, 'MeqTg': function (_0x34a519, _0x45cd1e) { return _0x34a519 + _0x45cd1e; }, 'lDMDd': _0x2883('53', '^h^q'), 'BkuzA': function (_0x233d3e, _0x45a566) { return _0x233d3e + _0x45a566; }, 'uleON': function (_0x48936f, _0x2c42c7) { return _0x48936f + _0x2c42c7; }, 'GHQlT': function (_0x5e8bd4, _0x401fdf) { return _0x5e8bd4 + _0x401fdf; } }; var _0x5ad99b = ''; var _0x20ecd2 = _0xdd8a5['smjLm'](_0x4ef8aa, {}); var _0xda8cc1 = 0x0; for (var _0xc365f1 in _0x20ecd2) { if (_0xdd8a5[_0x2883('54', '(hzX')](_0xdd8a5[_0x2883('55', 'qF1@')], _0xdd8a5[_0x2883('56', 'Btrb')])) { return ''; } else { if (_0xdd8a5['plBZc'](_0xda8cc1, 0x0)) { _0x5ad99b += _0xdd8a5[_0x2883('57', '*]1R')](_0xdd8a5[_0x2883('58', 'Vk)$')]('\x22' + _0xc365f1, _0xdd8a5[_0x2883('59', 'M$L6')]), _0x20ecd2[_0xc365f1]) + '\x22'; } else { _0x5ad99b += _0xdd8a5[_0x2883('5a', 'YPED')](_0xdd8a5['BkuzA'](_0xdd8a5[_0x2883('5b', 'cRGN')](',\x22' + _0xc365f1, _0x2883('1', '*]1R')), _0x20ecd2[_0xc365f1]), '\x22'); } _0xda8cc1 += 0x1; } } _0x5ad99b = _0xdd8a5[_0x2883('5c', 'D^0!')](_0xdd8a5['GHQlT'](_0x2883('5d', 'F%D!'), _0x5ad99b), '}'); return _0x5ad99b; } var UrlBuilder = { 'buildBookInfoUrl': function (_0xfe3cb3, _0x428793) { var _0x528a2c = { 'RMUyN': function (_0x3afac8, _0x2d0bcc) { return _0x3afac8 + _0x2d0bcc; }, 'pfMtS': function (_0x3f7748, _0x55055a) { return _0x3f7748 + _0x55055a; }, 'wbSkD': function (_0x557edd, _0x549787) { return _0x557edd + _0x549787; }, 'xAdLu': '?k=' }; var _0x2997ac = _0x2883('5e', 'VrrG')['split']('|'), _0xebe3a3 = 0x0; while (!![]) { switch (_0x2997ac[_0xebe3a3++]) { case '0': var _0x1ab26c = { 'bookId': _0x428793 }; continue; case '1': _0xfe3cb3 = _0x528a2c[_0x2883('5f', 'Id4@')](_0x528a2c[_0x2883('60', 'COc6')](_0x528a2c[_0x2883('61', '^h^q')](_0xfe3cb3, _0x528a2c['xAdLu']) + encryption(_0x3ec655), '&readType='), _0xa13d65); continue; case '2': return _0xfe3cb3; case '3': var _0xa13d65 = getReadTypeFromUrl(); continue; case '4': var _0x3ec655 = paraBuilder(_0x1ab26c); continue; }break; } }, 'buildPdfBookInfoUrl': function (_0x4460f0, _0x12fd29) { var _0x6e0e2d = { 'NEIhw': function (_0x242feb) { return _0x242feb(); }, 'OTurE': function (_0x4c314f, _0x5a3fd3) { return _0x4c314f + _0x5a3fd3; }, 'cGcuH': function (_0x3ebf9f, _0x3ca9e1) { return _0x3ebf9f + _0x3ca9e1; }, 'lNIex': '?k=' }; var _0x171012 = _0x6e0e2d[_0x2883('62', 'Yvjg')](getBookFromUrl); var _0x1aee01 = _0x6e0e2d[_0x2883('63', '86dG')](getReadTypeFromUrl); var _0x502251 = { 'bookId': _0x171012, 'pageNum': '1-' + _0x12fd29 }; var _0xfb3f8c = paraBuilder(_0x502251); return _0x6e0e2d['OTurE'](_0x6e0e2d[_0x2883('64', '0*56')](_0x4460f0 + _0x6e0e2d['lNIex'], encryption(_0xfb3f8c)), '&readType=') + _0x1aee01; }, 'buildCatalogInfoUrl': function (_0x43a8f0, _0x4ee270) { var _0x22c38e = { 'QPeSn': '0|2|5|1|3|4', 'maLEp': function (_0x19aaae) { return _0x19aaae(); }, 'yTptq': function (_0x6e539d) { return _0x6e539d(); }, 'ugdbU': function (_0x563c7e, _0x49ed32) { return _0x563c7e + _0x49ed32; }, 'NhnIH': function (_0x4f48e7, _0xa3f89d) { return _0x4f48e7 + _0xa3f89d; }, 'tTZUb': function (_0x5c0a05, _0xfddd47) { return _0x5c0a05 + _0xfddd47; }, 'Kmcsn': '?k=', 'XTZvE': function (_0x351e05, _0x620116) { return _0x351e05(_0x620116); }, 'WGADf': _0x2883('65', 'PX5h'), 'uqYoO': _0x2883('66', '58wq') }; var _0x4628b0 = _0x22c38e[_0x2883('67', 'D^0!')][_0x2883('68', '6mut')]('|'), _0x5b73b3 = 0x0; while (!![]) { switch (_0x4628b0[_0x5b73b3++]) { case '0': var _0x4f956b = _0x22c38e[_0x2883('69', 'D9qD')](getBookFromUrl); continue; case '1': var _0x39839f = paraBuilder(_0x4ac9e4); continue; case '2': var _0x11a2dc = _0x22c38e[_0x2883('6a', 'Vk)$')](getReadTypeFromUrl); continue; case '3': var _0x1c0267 = _0x22c38e[_0x2883('6b', 'Vk)$')](_0x22c38e[_0x2883('6c', 'Yvjg')](_0x22c38e[_0x2883('6d', 'YPED')](_0x22c38e[_0x2883('6e', 'Id4@')](_0x22c38e['tTZUb'](_0x22c38e['tTZUb'](_0x43a8f0, _0x22c38e['Kmcsn']), _0x22c38e[_0x2883('6f', 'Btrb')](encryption, _0x39839f)) + _0x2883('70', '6mut'), _0x11a2dc), _0x22c38e[_0x2883('71', '3nz0')]), _0x4f956b), _0x22c38e['uqYoO']) + _0x22c38e['yTptq'](getOrderIdFromUrl); continue; case '4': return _0x1c0267; case '5': var _0x4ac9e4 = { 'bookId': _0x4f956b }; continue; }break; } }, 'buildEpubCatalogDeatailInfoUrl': function (_0x27b29a, _0xac5c97) { var _0x3bdbd4 = { 'PmgqN': _0x2883('72', 'J^f!'), 'VzGli': function (_0x25d561, _0x441bb5) { return _0x25d561(_0x441bb5); }, 'zQaZg': function (_0x1c6f9e) { return _0x1c6f9e(); }, 'fMiAn': function (_0x1c7634) { return _0x1c7634(); }, 'McpeC': function (_0x3b159f, _0x55bde0) { return _0x3b159f + _0x55bde0; }, 'CvBZU': function (_0x4325fe, _0x4c682a) { return _0x4325fe + _0x4c682a; }, 'TPEvs': _0x2883('73', 'VrrG'), 'ipkvx': '&readType=' }; var _0x23a802 = _0x3bdbd4['PmgqN'][_0x2883('74', 'ISud')]('|'), _0x556cff = 0x0; while (!![]) { switch (_0x23a802[_0x556cff++]) { case '0': var _0x41a442 = _0x3bdbd4[_0x2883('75', '#U&I')](paraBuilder, _0x76a235); continue; case '1': var _0x45e0ba = _0x3bdbd4['zQaZg'](getBookFromUrl); continue; case '2': _0xac5c97 = _0x3bdbd4[_0x2883('76', 'D^0!')](parseInt, _0xac5c97); continue; case '3': var _0xf8b931 = _0x3bdbd4['fMiAn'](getReadTypeFromUrl); continue; case '4': _0x27b29a = _0x3bdbd4[_0x2883('77', 'BFQj')](_0x3bdbd4[_0x2883('78', 'MtnC')](_0x3bdbd4[_0x2883('79', 'M$L6')](_0x27b29a, _0x3bdbd4['TPEvs']) + encryption(_0x41a442), _0x3bdbd4['ipkvx']) + _0xf8b931 + _0x2883('7a', 'i5H!'), getOrderIdFromUrl()); continue; case '5': return _0x27b29a; case '6': var _0x76a235 = { 'bookId': _0x45e0ba, 'chapterId': _0xac5c97 }; continue; }break; } }, 'buildDeviceSignInUrl': function (_0x102ab5) { var _0xddabb0 = { 'aiPrK': function (_0x259b53) { return _0x259b53(); }, 'tblyf': function (_0x4f3742, _0x339f60) { return _0x4f3742 + _0x339f60; }, 'uqLgm': _0x2883('7b', 'HKt*'), 'xwAlT': _0x2883('7c', '3nz0') }; var _0x1698af = _0xddabb0[_0x2883('7d', '3gF0')](getReadTypeFromUrl); return _0xddabb0['tblyf'](_0x102ab5 + _0xddabb0[_0x2883('7e', 'MtnC')] + _0x1698af, _0xddabb0[_0x2883('7f', 'e8$@')]) + Math[_0x2883('80', 'D9qD')](); }, 'buildDeviceHearBeatUrl': function (_0x44abec) { var _0xe84c5a = { 'lgDXX': function (_0x55b9c4) { return _0x55b9c4(); }, 'amdAm': function (_0x11c261) { return _0x11c261(); }, 'ApNXd': function (_0x48c269, _0x428ebd) { return _0x48c269 + _0x428ebd; }, 'wZojU': function (_0xffad5e, _0x27d208) { return _0xffad5e + _0x27d208; }, 'FCnqk': '?uuid=&readType=', 'qfTPm': _0x2883('81', 'aoBh') }; var _0x21d1a0 = _0xe84c5a[_0x2883('82', 'HKt*')](getBookFromUrl); var _0x248014 = _0xe84c5a[_0x2883('83', 'WjQi')](getReadTypeFromUrl); return _0xe84c5a['ApNXd'](_0xe84c5a['wZojU'](_0xe84c5a[_0x2883('84', 'Nw#T')](_0xe84c5a['wZojU'](_0x44abec + _0xe84c5a[_0x2883('85', 'Dy)I')], _0x248014) + _0x2883('86', 'D^0!'), _0x21d1a0), _0xe84c5a[_0x2883('87', 'BFQj')]), Math[_0x2883('88', 'Ybrp')]()); }, 'buildDeviceCancelUrl': function (_0x4c0d68) { var _0x3009be = { 'YnWzL': function (_0x59ea4f) { return _0x59ea4f(); }, 'YqLdH': function (_0x1e0b00, _0x1b2e34) { return _0x1e0b00 + _0x1b2e34; }, 'LNxWq': _0x2883('89', 'Yvjg') }; var _0x1f1958 = _0x3009be[_0x2883('8a', 'Cb#O')](getReadTypeFromUrl); return _0x3009be[_0x2883('8b', 'D^0!')](_0x3009be['YqLdH'](_0x4c0d68 + _0x3009be[_0x2883('8c', '#U&I')], _0x1f1958), '&client=&clientVersion=&appType=1&t=') + Math[_0x2883('8d', 'WjQi')](); } }; function getBookFromUrl() { var _0x278b73 = { 'RWPxt': function (_0x1873c0, _0x3f85c8, _0xdde35) { return _0x1873c0(_0x3f85c8, _0xdde35); }, 'SpuQK': 'bookId' }; var _0x4481f0 = location[_0x2883('8e', '(G(*')]; return _0x278b73[_0x2883('8f', 'qF1@')](urlPara, _0x4481f0, _0x278b73[_0x2883('90', 'HKt*')]); } function getReadTypeFromUrl() { var _0x5cb139 = { 'uRPiD': function (_0x5b2053, _0x2785e1, _0x1b0eb1) { return _0x5b2053(_0x2785e1, _0x1b0eb1); }, 'vwOAQ': _0x2883('91', 'Dy)I') }; var _0x29cdc9 = location['href']; return _0x5cb139['uRPiD'](urlPara, _0x29cdc9, _0x5cb139[_0x2883('92', 'JM%E')]); } function getOrderIdFromUrl() { var _0x5ba398 = { 'QbPLw': function (_0x46e14d, _0xc81d80) { return _0x46e14d + _0xc81d80; }, 'YOTPL': function (_0x1eb0d3, _0x593784) { return _0x1eb0d3 + _0x593784; }, 'buaKk': _0x2883('93', '%HM('), 'jogAg': function (_0x864297, _0x441038) { return _0x864297 + _0x441038; }, 'tFpGT': function (_0x3a3663, _0x459dbf) { return _0x3a3663 + _0x459dbf; }, 'GTIDD': _0x2883('94', '58wq'), 'ARLCT': function (_0x2a2b4d, _0x17d3d1) { return _0x2a2b4d !== _0x17d3d1; }, 'wVAfN': 'jkMic', 'YiPQT': '.html', 'dWcUg': _0x2883('95', 'BFQj'), 'ayUyZ': function (_0x3768c1, _0x4bbf05) { return _0x3768c1 >= _0x4bbf05; }, 'hebXl': '/catalog/', 'wdqtF': function (_0x5ec678, _0x2f6419) { return _0x5ec678 + _0x2f6419; }, 'GSdjL': function (_0x6539e2, _0x13d1b6) { return _0x6539e2 > _0x13d1b6; }, 'awmTE': function (_0x36eaae, _0x5f07b5) { return _0x36eaae === _0x5f07b5; }, 'YQBek': _0x2883('96', 'F%D!'), 'gYRDj': function (_0x3f973a, _0x3e223d) { return _0x3f973a(_0x3e223d); } }; var _0x3fae20 = location[_0x2883('97', 'qF1@')]; if (_0x3fae20['indexOf'](_0x5ba398[_0x2883('98', 'COc6')]) >= 0x0 && _0x3fae20[_0x2883('99', 'Uvm#')]('.html') >= 0x0) { if (_0x5ba398['ARLCT'](_0x5ba398['wVAfN'], 'dVihI')) { var _0x28f23a = _0x5ba398[_0x2883('9a', 'Dy)I')](_0x3fae20[_0x2883('45', '3gF0')](_0x5ba398[_0x2883('9b', '58wq')]), _0x5ba398[_0x2883('9c', 'JM%E')][_0x2883('9d', '86dG')]); var _0xd5f819 = _0x3fae20[_0x2883('45', '3gF0')](_0x5ba398[_0x2883('9e', 'HKt*')]); var _0x598887 = _0x3fae20[_0x2883('9f', 'e8$@')](_0x28f23a, _0xd5f819); var _0x3b8394 = _0x598887[_0x2883('a0', 'Dy)I')]('-'); if (_0x3b8394[_0x2883('a1', '3nz0')] > 0x2) { if (_0x5ba398[_0x2883('a2', 'Btrb')](_0x2883('a3', 'rH8&'), _0x5ba398[_0x2883('a4', 'BFQj')])) { paras += _0x5ba398[_0x2883('a5', '$hy0')](_0x5ba398[_0x2883('a6', 'rH8&')]('\x22' + p + _0x5ba398['buaKk'], notNullObj[p]), '\x22'); } else { return parseInt(_0x3b8394[0x1]); } } return -0x1; } else { H = D[arguments[0x0][_0x2883('a7', 'VrrG')]()[_0x2883('a8', 'COc6')]()]; } } else if (_0x5ba398[_0x2883('a9', 'WjQi')](_0x3fae20[_0x2883('34', 's75H')](_0x5ba398[_0x2883('aa', '*]1R')]), 0x0) && _0x3fae20[_0x2883('ab', '86dG')](_0x5ba398[_0x2883('ac', 'Yvjg')]) >= 0x0) { var _0x28f23a = _0x5ba398[_0x2883('ad', 'Id4@')](_0x3fae20[_0x2883('ae', '#U&I')](_0x5ba398[_0x2883('af', 'D^0!')]), _0x5ba398[_0x2883('b0', ']Fsl')]['length']); var _0xd5f819 = _0x3fae20[_0x2883('b1', 'BFQj')](_0x5ba398['YiPQT']); var _0x598887 = _0x3fae20[_0x2883('b2', 'mOzN')](_0x28f23a, _0xd5f819); var _0x3b8394 = _0x598887[_0x2883('b3', 'Nw#T')]('-'); if (_0x5ba398['GSdjL'](_0x3b8394[_0x2883('b4', '58wq')], 0x2)) { if (_0x5ba398[_0x2883('b5', '%HM(')](_0x5ba398['YQBek'], _0x5ba398[_0x2883('b6', '3gF0')])) { return _0x5ba398[_0x2883('b7', '^h^q')](parseInt, _0x3b8394[0x1]); } else { K += _0x5ba398[_0x2883('b8', '#U&I')](_0x5ba398['tFpGT'](M, value), '&') + A[_0x2883('b9', '58wq')](_0x5ba398['tFpGT'](I, 0x1)); } } return -0x1; } { } return ''; } var FormatJson = { 'format': function (_0x15193f) { var _0x19c91c = { 'kqssc': function (_0x10c4ed, _0x567217) { return _0x10c4ed(_0x567217); }, 'ajypE': function (_0x2a6a69, _0x227c9b) { return _0x2a6a69(_0x227c9b); }, 'taRXX': function (_0x19fb95, _0x72327b) { return _0x19fb95 === _0x72327b; }, 'ZSqoN': 'qdbOt' }; var _0x5c6525 = null; try { _0x5c6525 = _0x19c91c[_0x2883('ba', 'JM%E')](eval, '(' + _0x15193f + ')'); } catch (_0x5cb565) { if (_0x19c91c['taRXX'](_0x19c91c[_0x2883('bb', '(hzX')], 'cSrMV')) { _0x5c6525 = _0x19c91c[_0x2883('bc', 'aoBh')](eval, _0x15193f); } else { _0x5c6525 = _0x19c91c['ajypE'](eval, _0x15193f); } } return _0x5c6525; }, 'formatContent': function (_0x19f73e) { var _0x431e56 = { 'aLtQQ': function (_0xe28967, _0x8c2045) { return _0xe28967(_0x8c2045); }, 'JaJXx': function (_0x3cea75, _0xcd9e87) { return _0x3cea75 + _0xcd9e87; }, 'FvRPK': function (_0x6c17db, _0x1f8397) { return _0x6c17db(_0x1f8397); }, 'ilwZI': function (_0x3ffb5b, _0x3e91cf) { return _0x3ffb5b(_0x3e91cf); } }; var _0x37f57a = null; try { _0x37f57a = _0x431e56['aLtQQ'](eval, _0x431e56[_0x2883('bd', ']Fsl')]('(', _0x431e56[_0x2883('be', 'JM%E')](decryption, _0x19f73e)) + ')'); } catch (_0x25f2ef) { _0x37f57a = _0x431e56[_0x2883('bf', 'i5H!')](eval, _0x431e56[_0x2883('c0', 'D^0!')](decryption, _0x19f73e)); } return _0x37f57a; } }; String[_0x2883('c1', '%HM(')][_0x2883('c2', 'qF1@')] = function (_0x3ecc78, _0x217e32) { return this[_0x2883('c3', ']Fsl')](new RegExp(_0x3ecc78, 'gm'), _0x217e32); }; String['prototype'][_0x2883('c4', 'COc6')] = function () { var _0x502856 = { 'oEUBk': 'http://storage.360buyimg.com/', 'YjlVW': _0x2883('c5', '(hzX'), 'OMojb': _0x2883('c6', 'e8$@'), 'Ewrun': 'http://img10.360buyimg.com/', 'gVAqG': _0x2883('c7', 'Ybrp'), 'xbeyp': _0x2883('c8', 'mOzN') }; return this[_0x2883('c9', '*]1R')](_0x502856['oEUBk'], _0x2883('ca', 'Ybrp'))[_0x2883('cb', 'PX5h')](_0x502856['YjlVW'], _0x502856[_0x2883('cc', 'HKt*')])[_0x2883('cd', 'Uc#m')](_0x502856[_0x2883('ce', 'GSz%')], _0x502856['gVAqG'])[_0x2883('cf', '$hy0')](_0x2883('d0', 'MtnC'), _0x502856['xbeyp'])['replaceAll']('http://jss.jd.com', _0x502856[_0x2883('d1', 'D9qD')]); };; _0xodP = 'jsjiami.com.v6';"
eval(util_js)

// !!! thor 的值粘贴到下边的变量里 !!!
let thor = "";
// !!!!!!
let bookId = "";
let readType = "";

const fetchAndSave = async (chapterId) => {
  // const url = genEpubUrl("/read/gC.action", bookId, chapterId, readType);

  // if target already exists, skip
  let target = path.join(__dirname, "output", bookId, `${chapterId}.html`)
  try {
    if (fs.existsSync(target)) {
      return;
    }
  } catch (err) {
    console.log("❌ 抓取出错: ", err);
    return;
  }
  const url = UrlBuilder.buildEpubCatalogDeatailInfoUrl("/read/gC.action", chapterId);
  const res = await fetch(`https://cread.jd.com${url}`, {
    headers: {
      accept: "*/*",
      "accept-language": "zh-CN,zh;q=0.9,en;q=0.8",
      "cache-control": "no-cache",
      pragma: "no-cache",
      "sec-fetch-dest": "empty",
      "sec-fetch-mode": "cors",
      "sec-fetch-site": "same-origin",
      "x-requested-with": "XMLHttpRequest",
      cookie: `thor=${thor};`,
    },
    referrer:
      "https://cread.jd.com/read/startRead.action?bookId=30334444&readType=1",
    referrerPolicy: "strict-origin-when-cross-origin",
    body: null,
    method: "GET",
    mode: "cors",
  });
  const json = await res.json();
  if (json.code !== "0") {
    console.log("❌ 抓取出错: ", json.msg);
    return;
  }
  console.log("✅ : chapterId", chapterId);
  const real = FormatJson.formatContent(json.content);
  const html = real.contentList[0].content;
  await fs.outputFile(
    path.join(__dirname, "output", bookId, `${chapterId}.html`),
    html
  );
};

const fetchCatalog = async () => {
  const url = genCatalogUrl("/read/lC.action", bookId, readType);
  const res = await fetch(`https://cread.jd.com${url}`, {
    headers: {
      accept: "*/*",
      "accept-language": "zh-CN,zh;q=0.9,en;q=0.8",
      "cache-control": "no-cache",
      pragma: "no-cache",
      "sec-fetch-dest": "empty",
      "sec-fetch-mode": "cors",
      "sec-fetch-site": "same-origin",
      "x-requested-with": "XMLHttpRequest",
      cookie: `thor=${thor};`,
    },
    referrer:
      "https://cread.jd.com/read/startRead.action?bookId=30410212&readType=3",
    referrerPolicy: "strict-origin-when-cross-origin",
    body: null,
    method: "GET",
    mode: "cors",
  });
  const json = await res.json();
  if (json.code !== "0") {
    console.log("❌ 抓取出错: ", json.msg);
    return;
  }
  const real = FormatJson.formatContent(json.content);
  return real.catalogList;
};

const genIndexHtml = async (catalog) => {
  const lis = [];
  catalog.forEach((item) => {
    if (item.level === 0) {
      lis.push(
        `<li><a href="./${item.catalogId}.html">${item.catalogName}</a></li>`
      );
    } else {
      lis.push(
        `<li style="text-indent: ${item.level}em;"><a href="./${item.catalogId}.html">${item.catalogName}</a></li>`
      );
    }
  });
  const html = `
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="http://storage.360buyimg.com/ebooks/9fd8bb77eb40456b746aaae41785499a_new_.css" />
    <title>目录</title>
  </head>
  <body>
    <ul>${lis.join("")}</ul>  
  </body>
</html>
`;
  await fs.outputFile(
    path.join(__dirname, "output", bookId, `index.html`),
    html
  );
};

const fire = async () => {
  console.log();
  console.log(
    "请事先将页面 cookie 中的 thor 值拷贝到 index.js 中的 thor 变量里!"
  );
  console.log();
  const answers = await inquirer.prompt([
    { name: "step1", type: "input", message: "请输入 bookId: " },
    { name: "step2", type: "input", message: "请输入 readType: " },
  ]);
  bookId = answers.step1;
  location["href"] = location["href"].replace("BOOKID", bookId);
  readType = answers.step2;
  const catalog = await fetchCatalog();
  if (!catalog) return;
  await fs.ensureDir(path.join(__dirname, "output", bookId));
  await genIndexHtml(catalog);
  let tasks = []
  for (let i = 0; i < catalog.length; i++) {
    const chapterId = catalog[i].catalogId;
    tasks.push(fetchAndSave(chapterId));
  }
  console.log("开始并行抓取...");
  await Promise.all(tasks);
  console.log("抓取完毕!");
};
fire();
